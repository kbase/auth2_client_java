/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
	id 'java'
	id 'jacoco'
}

// TODO NOW jar build
// TODO NOW javadoc build
// TODO NOW publish javadocs on release
// TODO NOW publish jar on release

repositories {
	mavenCentral()
}

compileJava {
	if (JavaVersion.current() <= JavaVersion.VERSION_1_8) {
		// TODO BUILD remove when we no longer support java 8
		java.sourceCompatibility = JavaVersion.VERSION_1_8
		java.targetCompatibility = JavaVersion.VERSION_1_8
	} else {
		options.release = 8
	}
}

test {
	systemProperty "test.cfg", "./test.cfg"
	testLogging {
		exceptionFormat = 'full'
		showStandardStreams = true
	}
	finalizedBy jacocoTestReport
}

jacocoTestReport {
	reports {
		xml.required = true
		csv.required = true
	}
}

javadoc {
	options {
		// I don't know why this isn't working, but it's not worth spending time on right now
		links "https://docs.oracle.com/javase/8/docs/api/"
	}
}

dependencies {

	// using older dependencies to not force upgrades on services that might not be able to
	// handle them. Need to upgrade the services and then upgrade here
	implementation 'ch.qos.logback:logback-classic:1.1.2'
	implementation 'com.fasterxml.jackson.core:jackson-annotations:2.5.4'
	implementation 'com.fasterxml.jackson.core:jackson-databind:2.5.4'
	implementation 'org.slf4j:slf4j-api:1.7.25'

	testImplementation 'org.ini4j:ini4j:0.5.2'
	testImplementation 'junit:junit:4.12'
	testImplementation 'nl.jqno.equalsverifier:equalsverifier:3.1.10'
	testImplementation 'org.apache.commons:commons-lang3:3.1'
}
